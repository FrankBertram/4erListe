<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sintherner Skatclub - Spielzettel</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 13px;
      margin: 15px;
    }
    .header {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      align-items: center;
      margin-bottom: 12px;
    }
    .header span { font-weight: bold; }
    table {
      border-collapse: collapse;
      width: 720px;
      font-size: 11px;
    }
    th, td {
      border: 1px solid #444;
      padding: 3px 4px;
      text-align: center;
      vertical-align: middle;
    }
    th {
      background-color: #eee;
      font-size: 10px;
      line-height: 1.1;
    }
    
    .vertical {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      transform: rotate(180deg);
      white-space: nowrap;
    }
    .player-name {
      width: 80px;
      text-align: left;
      padding-left: 6px;
    }
    .gew-verl {
      font-size: 9px;
      line-height: 1;
    }
    
    
    .edit-btn {
      font-size: 8px;
      padding: 1px 1px;
      cursor: pointer;
      background: #fff;
      border: 1px solid #888;
    }    
    .result-row td {
      background-color: #f8f8f8;
      font-weight: bold;
    }
    .money-row {
      display: flex;
      gap: 20px;
      justify-content: flex-start;
      margin: 8px 0;
    }
    .money-row input {
      width: 90px;
      text-align: right;
    }
    .signature {
      margin-top: 30px;
      display: flex;
      align-items: center;
      gap: 20px;
    }
    input[type="text"] {
      border: none;
      border-bottom: 1px solid #333;
      background: transparent;
    }
#skat-table thead th {
  position: sticky;
  background: #f0f0f0; /* Hintergrundfarbe unbedingt setzen */
  border-bottom: 2px solid #ccc;
  text-align: center;                                        
  padding: 4px 6px;
  z-index: 2;
}

/* Erste Zeile fixieren */
#skat-table thead tr:nth-child(1) th {
  top: 0;
  z-index: 3;
}

/* Zweite Zeile fixieren direkt unter der ersten */
#skat-table thead tr:nth-child(2) th {
  top: 30px; /* HÃ¶he der ersten Zeile anpassen */
  z-index: 2;
}
#skat-table tfoot {
  position: sticky;
  bottom: 0;  /* Fixiert am unteren Rand des Scrollcontainers */
  z-index: 3; /* Damit der FuÃŸ Ã¼ber den Datenzeilen liegt */
}

#skat-table tfoot td {
  background: #f0f0f0;
  border-top: 2px solid #ccc;
  padding: 4px 6px;
  text-align: center;
}

  </style>
</head>
<body>

<div class="header">
  <span>1. Sintherner Skatclub 1992 e.V.</span>
  <span>Serie: <input type="text" value="2" size="4"></span>
  <span>Tisch: <input type="text" size="6"></span>
  <span>Datum: <input type="text" size="12"></span>
</div>

<div class="table-wrapper" style="max-height:600x; overflow-y:auto;">
<table id="skat-table">
  <thead>
    <tr>
      <th rowspan="2" class="vertical">Lfd. Nr. Spiel</th>
      <th rowspan="2">9 <br>10<br>11<br>12<br>23<br>24</th>
      <th rowspan="2" class="vertical">mit Spitzen</th>
      <th rowspan="2" class="vertical">ohne Spitzen</th>
      <th colspan="6">Gewinnstufen</th>
      <th colspan="2">Spiel-<br>werte</th>
      <th colspan="3" class="player-name1">Name (ListenfÃ¼hrer)</th>
      <th colspan="3" class="player-name2">Name</th>
      <th colspan="3" class="player-name3">Name</th>
      <th colspan="3" class="player-name4">Name</th>
      <th rowspan="2" class="vertical">Eingepasst</th>
      <th></th>
    </tr>
    <tr>
      <th class="vertical">Hand</th>
      <th class="vertical">Schneider</th>
      <th class="vertical">Schn. ang.</th>
      <th class="vertical">Schwarz</th>
      <th class="vertical">Schw. ang.</th>
      <th class="vertical">Offen</th>
      <th>+</th>
      <th>-</th>
      <th>Platz 1</th>
      <th class="vertical">gew</th>
      <th class="vertical">verl</th>
      <th>Platz 2</th>
      <th class="vertical">gew</th>
      <th class="vertical">verl</th>
      <th>Platz 3</th>
      <th class="vertical">gew</th>
      <th class="vertical">verl</th>
      <th>Platz 4</th>
      <th class="vertical">gew</th>
      <th class="vertical">verl</th>
      <th></th>
    </tr>
  </thead>
  <tbody id="game-rows">
    <!-- Die 36 Zeilen werden per JavaScript eingefÃ¼gt -->
  </tbody>
<tfoot>
  <tr>
    <th colspan="12" style="text-align:center; background:#f0f0f0; font-weight:bold;">Spielpunkte:
    </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
    <th></th>
  </tr>
  <tr>
    <th colspan="12" style="text-align:center; background:#f0f0f0; font-weight:bold;">+ (gewonnene Spiele - verlorene Spiele) x 50
    </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
    <th></th>
  </tr>
  <tr>
    <th colspan="12" style="text-align:center; background:#f0f0f0; font-weight:bold;">+ verlorene Spiele der Gegenspieler x 30
    </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
    <th></th>
  </tr>
  <tr>
    <th colspan="12" style="text-align:center; background:#f0f0f0; font-weight:bold;">Gesamtpunkte:
    </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>      
    <th></th>
  </tr>
</tfoot>
  
</table>
</div>

<dialog id="spiel-dialog" style="padding:20px; border-radius:8px; width:700px; max-width:90%; font-size:15px;">
  <form method="dialog" id="spiel-form" style="display:flex; flex-direction:column; gap:15px;">
    <h3 style="margin:0 0 10px 0; text-align:center;">Spiel eintragen</h3>
    
    <!-- Grundwert-Auswahl -->
	<div id="grundwert-buttons" style="display:flex; flex-wrap:wrap; gap:8px;">
	  <button type="button" onclick="setGrundwert('Grand')" style="padding:12px 18px; font-size:16px; min-width:70px; border-radius:6px;">Grand</button>
	  <button type="button" onclick="setGrundwert('â™£')" style="padding:12px 18px; font-size:24px; min-width:70px; border-radius:6px;">â™£</button>
	  <button type="button" onclick="setGrundwert('â™ ')" style="padding:12px 18px; font-size:24px; min-width:70px; border-radius:6px;">â™ </button>
	  <button type="button" onclick="setGrundwert('â™¥')" style="padding:12px 18px; font-size:24px; min-width:70px; border-radius:6px;">â™¥</button>
	  <button type="button" onclick="setGrundwert('â™¦')" style="padding:12px 18px; color:red; font-size:24px; min-width:70px; border-radius:6px;">â™¦</button>
	  <button type="button" onclick="setGrundwert('Null')" style="padding:12px 18px; font-size:16px; min-width:70px; border-radius:6px;">Null</button>
	  <button type="button" onclick="setGrundwert('Eingepasst')" style="padding:12px 18px; font-size:16px; min-width:70px; border-radius:6px;">Pass</button>
	</div>
      <input type="text" id="grundwert" style="padding:6px;" readonly placeholder="Bitte wÃ¤hlen">
    </div>

    <!-- Hand, Spitzen, ohne Spitzen -->
    <div style="display:flex; gap:10px;">
      <label style="flex:1; display:flex; flex-direction:column;">
        Hand
        <input type="text" id="hand" style="padding:6px;">
      </label>
      <label style="flex:1; display:flex; flex-direction:column;">
        Mit Spitzen
        <input type="number" id="mitSpitzen" style="padding:6px;">
      </label>
      <label style="flex:1; display:flex; flex-direction:column;">
        Ohne Spitzen
        <input type="number" id="ohneSpitzen" style="padding:6px;">
      </label>
    </div>

    <!-- Buttons Speichern/Abbrechen -->
    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:10px;">
      <button type="button" onclick="closeSpielDialog()" style="padding:6px 12px; border-radius:4px; border:1px solid #888; background:#eee; font-size:15px;">Abbrechen</button>
      <button type="submit" style="padding:6px 12px; border-radius:4px; border:none; background:#4CAF50; color:white; font-size:15px;">Speichern</button>
    </div>
  </form>
</dialog>



<script>
// Tabelle befÃ¼llen
// Beispiel-Array - 36 EintrÃ¤ge vorbereiten
const spielDaten = Array(36).fill(null).map((_, i) => ({
  nr: i + 1,
  grundwert: "", hand: "", schneider: "", schwarz: "", 
  schneiderang: "", schwarzang: "", offen: "",
  mitSpitzen: "", ohneSpitzen: "", spielwert: "",
  pluswert: "", minuswert: "",
  p1_punkte: "", p1_gew: "", p1_verl: "",
  p2_punkte: "", p2_gew: "", p2_verl: "",
  p3_punkte: "", p3_gew: "", p3_verl: "",
  p4_punkte: "", p4_gew: "", p4_verl: "",
  eingepasst: ""
}));

function fillTable() {
  const tbody = document.getElementById("game-rows");
  tbody.innerHTML = "";

  let buttonInserted = false;

  spielDaten.forEach((data, i) => {

    const isEmpty = !data.grundwert && !data.hand;

    // ðŸ”¹ Button vor der ersten leeren Zeile einfÃ¼gen
    if (isEmpty && !buttonInserted) {
      createButtonRow(i); // i = Index des Spiels nach dem Button
      buttonInserted = true;
    }

    // ðŸ”¹ Spiel-Zeile einfÃ¼gen
    const row = document.createElement("tr");
    row.classList.add("data-row");
    row.dataset.nr = data.nr;       
    row.innerHTML = `
      <td>${data.nr}</td>
      <td>${data.grundwert}</td>
      <td>${data.mitSpitzen}</td>
      <td>${data.ohneSpitzen}</td>
      <td>${data.hand}</td>
      <td>${data.schneider}</td>
      <td>${data.schneiderang}</td>
      <td>${data.schwarz}</td>
      <td>${data.schwarzang}</td>
      <td>${data.offen}</td>
      <td>${data.pluswert}</td>
      <td>${data.minuswert}</td>
      <td>${data.p1_punkte}</td>
      <td>${data.p1_gew}</td>
      <td>${data.p1_verl}</td>
      <td>${data.p2_punkte}</td>
      <td>${data.p2_gew}</td>
      <td>${data.p2_verl}</td>
      <td>${data.p3_punkte}</td>
      <td>${data.p3_gew}</td>
      <td>${data.p3_verl}</td>
      <td>${data.p4_punkte}</td>
      <td>${data.p4_gew}</td>
      <td>${data.p4_verl}</td>
      <td>${data.eingepasst}</td>
      <td>
        <button class="edit-btn" onclick="openEditModal(${data.nr})">Edit</button>
      </td>
    `;

    // ðŸ”¹ Schraffur automatisch nach Nr
    const colMap = [13, 16, 19, 22]; 
    const mod = (data.nr - 1) % 4;   

    row.querySelector(`td:nth-child(${colMap[mod]})`).style.background =
      "repeating-linear-gradient(-45deg, #ddd, #ddd 3px, #fff 3px, #fff 6px)";    

    tbody.appendChild(row);
  });
}

// ðŸ”¹ Button-Zeile erstellen
function createButtonRow(spielIndex) {
  const tbody = document.getElementById("game-rows");
  const btnRow = document.createElement("tr");
  btnRow.classList.add("button-row");

  // Alle <th> der ersten Zeile nehmen â†’ komplette Spaltenzahl
  const colCount = document.querySelectorAll("#skat-table thead tr:first-child th").length+14;

  const td = document.createElement("td");
  td.colSpan = colCount;        // Button Ã¼ber alle Spalten erstrecken
  td.style.textAlign = "center";
  td.style.background = "#f5f5f5";
  td.style.padding = "6px 0";

  td.innerHTML = `<button onclick="openNewModal(${spielIndex})" style="padding:4px 12px; font-weight:bold;">Neuer Eintragâ€¦</button>`;

  btnRow.appendChild(td);
  tbody.appendChild(btnRow);
}


// ðŸ”¹ Modal Ã¶ffnen fÃ¼r bestehendes Spiel
function openNewModal(spielIndex) {
  const dialog = document.getElementById("spiel-dialog");
  const spiel = spielDaten[spielIndex]; // vorhandenes Spiel

  document.getElementById("grundwert").value = spiel.grundwert || "";
  document.getElementById("hand").value = spiel.hand || "";
  document.getElementById("mitSpitzen").value = spiel.mitSpitzen || "";
  document.getElementById("ohneSpitzen").value = spiel.ohneSpitzen || "";

  document.getElementById("spiel-form").dataset.spielIndex = spielIndex;
  dialog.showModal();
}

function closeSpielDialog() {
  document.getElementById("spiel-dialog").close();
}

// ðŸ”¹ Werte aus Modal Ã¼bernehmen und bestehendes Spiel aktualisieren
document.getElementById("spiel-form").addEventListener("submit", (e) => {
  e.preventDefault();

  const index = parseInt(e.target.dataset.spielIndex, 10);
  const spiel = spielDaten[index];

  spiel.grundwert = parseInt(document.getElementById("grundwert").value) || "";
  spiel.hand = document.getElementById("hand").value || "";
  spiel.mitSpitzen = parseInt(document.getElementById("mitSpitzen").value) || 0;
  spiel.ohneSpitzen = parseInt(document.getElementById("ohneSpitzen").value) || 0;

  fillTable(); 
  closeSpielDialog();
});
function setGrundwert(value) {
  const input = document.getElementById("grundwert");

  // Feste Werte zuordnen
  let grundwertMap = {
    "Grand": 24,
    "â™£": 12,
    "â™ ": 11,
    "â™¥": 10,   // anpassen
    "â™¦": 9,   // anpassen
    "Null": 23,
    "Eingepasst": "E"
  };

  input.value = grundwertMap[value];

  const buttons = document.querySelectorAll("#grundwert-buttons button");
  buttons.forEach(btn => {
    // Grundfarbe fÃ¼r Symbole
    let baseColor = "black";
    if (btn.textContent === "â™¥" || btn.textContent === "â™¦") baseColor = "red";

    if (btn.textContent === value) {
      btn.style.backgroundColor = "#4CAF50"; // markiert
      btn.style.color = "white";             // Schriftfarbe weiÃŸ
      btn.style.fontWeight = "bold";
    } else {
      btn.style.backgroundColor = "";        // Reset
      btn.style.color = baseColor;           // Grundfarbe wiederherstellen
      btn.style.fontWeight = "";
    }
  });
}

// Beim Laden ausfÃ¼hren
window.addEventListener("load", fillTable);
</script>

</body>
</html>
